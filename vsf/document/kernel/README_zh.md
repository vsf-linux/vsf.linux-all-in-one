# 《 VSF 内核》

## 1. 简介
&emsp;&emsp;VSF 的内核为事件驱动内核，本质上只是一些不同优先级的事件队列组成。任何地方（中断、非中断）都可以发送事件给某个具体任务，事件会进入到任务优先级所属的事件队列。一般而言，事件队列运行在不同优先级的 swi （软件中断）中，当事件队列中有待处理事件的时候，对应的 swi 中断会被激活。在 swi 中断处理程序执行的时候，就从事件队列中按一定次序规律，逐一拿出事件交由指定的任务处理。在所有事件队列都是空的时候，复位中断里的 IDLE 代码，就会让芯片休眠。这样实现的一个好处，就是任务的优先级，以及任务的抢占，都是由硬件来实现的。缺点是事件处理的代码基本都是基于状态机的实现，比起独立堆栈的 thread 来说，开发相对有一些不方便。不过， VSF 也提供了不同任务形式的封装，其中也包括独立堆栈的任务，底层都是基于事件驱动任务。

&emsp;&emsp;VSF 中的 IPC （任务间通信）的实现也比较特殊，出于优化的目的，都是基于 vsf_sync_t 的不同用户层封装。包括信号量、互斥量、触发器、队列等等，都是基于 vsf_sync_t 来实现的，甚至很多 API 都只是 vsf_sync_t 的 API 的宏封装，不会占用额外的代码空间。

## 2. 目录
- [事件驱动](eda/README_zh.md)
- [独立堆栈线程任务](thread/README_zh.md)
- 子任务调用